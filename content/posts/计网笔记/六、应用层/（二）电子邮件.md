---
title: （二）电子邮件
date: 2025-03-14T10:09:46.772484+08:00
tags: ['计网笔记', '六、应用层', '（二）电子邮件.md']
url: /posts/lLFK5TctQD
author: "Yan2u"
IsPost: true
ShowReadingTime: true
ShowBreadCrumbs: true
ShowPostNavLinks: true
showToc: true
TocOpen: false
ShowWordCount: true
UseHugoToc: true
---

<a href="/notes408/chapters_index"> Indexes </a> > <a href="/notes408/indexes/xIRy1MDUIU"> 计网笔记 </a> > <a href="/notes408/indexes/FJajpaUVuk"> 六、应用层 </a> > （二）电子邮件

### 1. 概念

- **电子邮件(e-mail)** ：是因特网上使用得最多的和最受用户欢迎的一种应用；

- 功能：

	- 把邮件发送到收件人使用的邮件服务器并放在其中的收件人邮箱中；

	- 收件人可随时上网到自己使用的邮件服务器进行读取；

	- 传送文字信息，声音和图像，附件；

- **相关协议**

	- **SMTP**：基于 TCP，用于**发送**邮件；

	- **POP3**：基于 TCP，用于**收取和读取**邮件；

	- **MIME**：用于邮件首部，**说明其数据类型**，使邮件可以**同时传输多种类型数据**；

### 2. 电子邮件系统

![img_M2bFo4KjTb](https://cloudflare-imgbed-ajc.pages.dev/file/1741871810050_M2bFo4KjTb.png)

#### 2.1. 用户代理（UA，User Agent）

- PC 软件，作为用户与电子邮件系统的接口；

- 功能：撰写、显示、处理邮件和通信；

#### 2.2. 邮件服务器

- 功能

	- 发送和接收邮件；

	- 向发信人报告邮件传送的情况（已交付、被拒绝、丢失等）；

- 采用标准的客户服务器 C/S 模式工作；

- 可作为发送或者接收方，需要**同时支持 SMTP 和 POP3 协议**；

- 发送方：**发送邮件时，自身作为 SMTP 客户**，接收方服务器作为 SMTP 服务器；

- 接收方：**同时作为 SMTP 服务器和 POP3 服务器**，负责接收邮件和将邮件传给接收方用户代理；

#### 2.3. 邮箱地址

- **格式**：收件人邮箱名 `@` 邮箱所在主机的域名（TCP/IP 体系）；

- 收件人邮箱名在主机域名范围内是唯一的；

- 主机域名在互联网上是唯一的；

### 3. SMTP 和 POP3 协议

#### 3.1. SMTP

- 规定了两个相互通信的 SMTP 进程之间应如何交换信息；

- （了解）SMTP规定了 14 条命令和 21 种应答信息；

	- 每条命令 4 个字母；

	- 每种应答信息一般只有一行信息，由一个 3 位数字的代码开始，后面可附上很简单的文字说明；

- **SMTP 通信的三个阶段**

	- **连接建立**：连接是在发送主机的 SMTP 客户和接收主机的 SMTP 服务器之间建立的；

		- **SMTP不使用中间的邮件服务器**；

	- **邮件传送**；

	- **连接释放**：邮件发送宪毕后，SMTP 释放 TCP 连接；

- SMTP 缺点

	- 不能传送句执行文件或其他的二进制对象；

	- 限于传送 7 位的 ASCII 码（英语）。许多其他非英语国家的文字（如中文、俄文，甚至带重音符号的法文或德文）无法传送；

#### 3.2. POP3

- **邮局协议 POP**：是一个非常简单、但功能有限的邮件读取协议，现在使用第三个版本即 POP3；

- 接收邮件的主机上运行 POP3 客户程序，接收方邮件服务器运行 POP3 服务器程序；

### 4. 电子邮件格式与 MIME

#### 4.1. 电子邮件格式

- RFC 822 格式：规定了邮件内容中的首部（header) 格式，而对**邮件的主体 (body) 部分则让用户自由撰写**；

- 邮件内容首部为一些 `key : value`；

	- **最重要的关键字：To（目的地） 和 Subject（主题）**；

#### 4.2. MIME

![img_FQyDQ3KX6d](https://cloudflare-imgbed-ajc.pages.dev/file/1741871823813_FQyDQ3KX6d.png)

- 基于 SMTP 和 RFC 822 格式，**增加邮件主体的结构，定义传输非 ASCII 码的规则**；

- MIME **将用户的非 ASCII 码编为 ASCII 码，由 SMTP 传输，再在接收端解码**；

- 三个部分

	- 5个新的邮件首部字段：可包含在 RFC 822 首部中。提供了有关邮件主体的信息；

	- 定义了许多邮件内容的格式。对多媒体电子邮件的表示方法进行了标准化；

	- **定义了传送编码**：可对任何内容格式进行转换，而不会被邮件系统改变；

- （了解）5 个新的邮件首部

	- **MIME-Version**：标志MIME的版本（现行版本 1.0）；

	- **Content-Description**：可读字符串，说明此邮件的内容；

	- **Content-Id**：邮件的唯一标识符；

	- **Content-Transfer-Encoding**：在传送时邮件的主体是如何编码的；

		- 编码方式：ASCII，quoted-printable，base64 等；

	- **Content-Type**：说明邮件内容的类型

		- 包含两个标识符：**基本类型和子类型**，用斜杠 / 隔开。共 7 个基本类型和 15 个子类型；

### 5. 基于万维网 (www) 的电子邮件

- **现行主流**的电子邮件收发方式（但不常考）；

- 特点：**从用户代理到邮件服务器的传输采用 http(s) 协议**，邮件服务器之间仍是 SMTP 协议；

- 好处：只要能够找到上网的计算机，打开任何一种**浏览器**就可以**非常方便**地收发电子邮件；

